name: cd

on: push

# on:
#     push:
#         branches:
#             - main
#             - next
#     pull_request:
#         branches:
#             - main
#             - next

jobs:
    cd:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v4
            # - uses: actions/setup-node@v4
            #   with:
            #       node-version: 'latest'

            # - name: ðŸ“¦ Install dependencies
            #   run: npm ci

            - name: ðŸš§ Build image
              run: npm run docker:build

            # - name: ðŸ§ª Test project
            #   run: npm run test

            - name: ðŸš€ Deploy image
              run: |
                echo ${{ secrets.CR_PAT }} | docker login ghcr.io -u USERNAME --password-stdin
                docker tag iconify/api ghcr.io/hooore/iconify-api:latest
                docker push ghcr.io/hooore/iconify-api:latest
